# =============================================================================
# Lynex - Development Environment Configuration
# =============================================================================
# Copy this file to .env in the project root for local development.
# For production, use production.env as a template.

# Environment
ENV=development
DEBUG=true

# =============================================================================
# Database - ClickHouse
# =============================================================================
# For local development, use Docker:
#   docker run -d --name clickhouse -p 8123:8123 -p 9000:9000 clickhouse/clickhouse-server
CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=9000
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DATABASE=default

# =============================================================================
# Queue - Redis
# =============================================================================
# For local development, use Docker:
#   docker run -d --name redis -p 6379:6379 redis:7
REDIS_URL=redis://localhost:6379
QUEUE_MODE=redis

# =============================================================================
# Authentication - Supabase
# =============================================================================
# Get these from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api
SUPABASE_URL=http://localhost:54321
SUPABASE_ANON_KEY=your-local-anon-key
SUPABASE_SERVICE_KEY=your-local-service-key

# =============================================================================
# API Configuration
# =============================================================================
API_HOST=0.0.0.0
INGEST_API_PORT=8001
UI_BACKEND_PORT=8000
BILLING_PORT=8002

# CORS - allowed origins for local development
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# =============================================================================
# Admin
# =============================================================================
# Generate with: openssl rand -base64 32
ADMIN_API_KEY=dev-admin-key-change-in-production

# =============================================================================
# Monitoring (Optional for development)
# =============================================================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# Datadog (optional)
DATADOG_ENABLED=false
DATADOG_API_KEY=
DD_SERVICE=lynex
DD_ENV=development
DD_VERSION=1.0.0

# =============================================================================
# S3 Cold Storage (Archive events >30 days)
# =============================================================================
# For production: Use AWS S3, for development: LocalStack or MinIO
S3_ARCHIVE_BUCKET=lynex-cold-storage
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_REGION=us-east-1

# Archive events older than this many days (default: 30)
ARCHIVE_AFTER_DAYS=30

# Delete from ClickHouse after archiving (recommended for cost savings)
DELETE_AFTER_ARCHIVE=true

# Batch size for archiving (events per Parquet file)
ARCHIVE_BATCH_SIZE=10000

# Run archival job every N hours (default: 24)
ARCHIVE_INTERVAL_HOURS=24

# =============================================================================
# Frontend (Vite)
# =============================================================================
VITE_API_URL=http://localhost:8000
VITE_SUPABASE_URL=http://localhost:54321
VITE_SUPABASE_ANON_KEY=your-local-anon-key
VITE_SENTRY_DSN=
VITE_SENTRY_ENVIRONMENT=development
